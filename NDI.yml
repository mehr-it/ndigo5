GENERATOR:
  PackageName: ndigo5
  PackageDescription: "Package NDI provides go bindings for the Newtek NDI SDK"
  PackageLicense: "THE AUTOGENERATED LICENSE. ALL THE RIGHTS ARE RESERVED BY ROBOTS."
  Includes:
    - include/Processing.NDI.Lib.h
  SysIncludes:
    - stdlib.h
    #- stdint.h
  Options:
    SafeStrings: true
  FlagGroups:
    - name: LDFLAGS
      flags:
        - -L/usr/local/lib
        - -lndi.5
      

PARSER:
  IncludePaths:
    - /usr/include
    - /usr/local/include
    - /usr/include/x86_64-linux-gnu
    - /usr/lib/gcc/x86_64-linux-gnu/9/include
    - /usr/include/c++/9
    - /usr/include/x86_64-linux-gnu/c++/9
    #- /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include
    #- /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/
    #- /Library/NDI SDK for Apple/include
  SourcesPaths:
    - include/Processing.NDI.Lib.h

TRANSLATOR:
  ConstCharIsString: true
  ConstUCharIsString: false
  ConstRules:
    defines: eval
  Rules:
    global:
      
      - { action: accept, from: "^NDIlib_" }
      - { action: replace, from: "^NDIlib_" }
      
      - { transform: export }
    #    const:
    #      - {action: accept, from: "^OV_"}
    #      - {action: replace, from: "^ov_", to: _}
    #type:
    #   - {action: replace, from: "_t$"}
    type:
      #- {action: accept, from: "int64_t"}
      #- {action: replace, from: "Int64T", to: "long"}
      #- {action: ignore, from: "Int64T"}
    private:
      - { transform: unexport }
    post-global:
      - { transform: export }
      - { load: snakecase }
    function:
      # These functions are defined manually, because they are not generated correctly using c-for-go. See
      # ndigo_man.go
      - { action: ignore, from: "^NDIlib_find_get_current_sources" }  
  PtrTips:
    struct:
      - { target: NDIlib_metadata_frame_t, tips: [ 0,0,ref ] }
      - { target: NDIlib_video_frame_t, tips: [ 0,0,0,0,0,0,0,0,ref,0 ] }
      - { target: NDIlib_video_frame_v2_t, tips: [ 0,0,0,0,0,0,0,0,ref,0,0 ] }
      - { target: NDIlib_audio_frame_t, tips: [ 0,0,0,0,ref,0 ] }
      - { target: NDIlib_audio_frame_v2_t, tips: [ 0,0,0,0,ref,0,0,0 ] }
      - { target: NDIlib_audio_frame_v3_t, tips: [ 0,0,0,0,0,ref,0,0 ] }
      - { target: NDIlib_audio_frame_interleaved_16s_t, tips: [ 0,0,0,0,0,ref ] }
      - { target: NDIlib_audio_frame_interleaved_32s_t, tips: [ 0,0,0,0,0,ref ] }
      - { target: NDIlib_audio_frame_interleaved_32f_t, tips: [ 0,0,0,0,ref ] }
    function:
      #- { target: ^NDIlib_find_get_current_sources, tips: [ sref,sref,sref,sref,sref,sref,sref,sref ], self: arr }
      # this covers all other cases
      - { target: ^NDIlib, tips: [ sref,sref,sref,sref,sref,sref,sref,sref ] }
